{"is_source_file": true, "format": "TypeScript", "description": "This file implements a custom React hook 'useRatingPanel' which manages the state, behaviors, and side effects related to a rating panel UI component, including fetching previous ratings, auto-dismiss behavior, toast notifications, and handling user interactions like submit and remove ratings.", "external_files": ["../services/ratingService"], "external_methods": ["getRating", "submitRating", "deleteRating"], "published": ["useRatingPanel"], "classes": [], "methods": [{"name": "export function useRatingPanel({ useRatingPanel", "description": "Main hook function managing rating panel state including visibility, loading, rating values, error messages, toast notifications, auto-dismiss timer, and interactions with the rating service.", "scope": "", "scopeKind": ""}, {"name": "showToast", "description": "Internal callback function to trigger toast notifications of various types ('success', 'error', 'info') with specific messages."}, {"name": "submit", "description": "Asynchronous function to submit a new rating value, handle success and error states, show corresponding toast notifications, and invoke onDismiss callback upon success."}, {"name": "remove", "description": "Asynchronous function to delete the existing rating, update state, and show notifications based on success or failure."}, {"name": "clearToast", "description": "Function to clear any active toast notifications."}, {"name": "pauseTimer", "description": "Pauses the auto-dismiss countdown by disabling auto dismiss timer."}, {"name": "resumeTimer", "description": "Resumes the auto-dismiss countdown by re-enabling auto dismiss timer."}], "calls": ["getRating", "submitRating", "deleteRating"], "search-terms": ["useRatingPanel", "react hooks", "rating service", "auto-dismiss timer", "toast notifications", "rating state management"], "state": 2, "file_id": 20, "knowledge_revision": 41, "git_revision": "", "ctags": [{"_type": "tag", "name": "RatingToastState", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^export interface RatingToastState {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "UseRatingPanel", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^export interface UseRatingPanel {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "UseRatingPanelArgs", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^interface UseRatingPanelArgs {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "autoDismissSeconds", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  autoDismissSeconds?: number;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanelArgs", "scopeKind": "interface"}, {"_type": "tag", "name": "canAutoDismiss", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  canAutoDismiss: boolean;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}, {"_type": "tag", "name": "canAutoDismiss", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const canAutoDismiss = useRef(true);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "clearToast", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  clearToast: () => void;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}, {"_type": "tag", "name": "clearToast", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const clearToast = useCallback(() => setToast(null), []);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "contentId", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  contentId: string;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanelArgs", "scopeKind": "interface"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const [error, setError] = useState<string | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  error: string | null;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}, {"_type": "tag", "name": "initialVisible", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  initialVisible?: boolean;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanelArgs", "scopeKind": "interface"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  key: number;$/", "language": "TypeScript", "kind": "property", "scope": "RatingToastState", "scopeKind": "interface"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const [loading, setLoading] = useState(false);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  loading: boolean;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  message: string;$/", "language": "TypeScript", "kind": "property", "scope": "RatingToastState", "scopeKind": "interface"}, {"_type": "tag", "name": "mounted", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^    let mounted = true;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "onDismiss", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  onDismiss?: (reason: 'timeout' | 'close' | 'rated') => void;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanelArgs", "scopeKind": "interface"}, {"_type": "tag", "name": "pauseTimer", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const pauseTimer = useCallback(() => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "pauseTimer", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  pauseTimer: () => void;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}, {"_type": "tag", "name": "rec", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^        const rec = await getRating(contentId);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "remainingSeconds", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const [remainingSeconds, setRemainingSeconds] = useState(autoDismissSeconds);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "remainingSeconds", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  remainingSeconds: number;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const remove = useCallback(async () => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  remove: () => Promise<void>;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}, {"_type": "tag", "name": "resumeTimer", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const resumeTimer = useCallback(() => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "resumeTimer", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  resumeTimer: () => void;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}, {"_type": "tag", "name": "setError", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const [error, setError] = useState<string | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const [loading, setLoading] = useState(false);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "setRemainingSeconds", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const [remainingSeconds, setRemainingSeconds] = useState(autoDismissSeconds);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "setToast", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const [toast, setToast] = useState<RatingToastState | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "setValue", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const [value, setValue] = useState<RatingValue | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "setVisible", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const [visible, setVisible] = useState(initialVisible);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "setVisible", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  setVisible: (v: boolean) => void;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}, {"_type": "tag", "name": "showToast", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const showToast = useCallback((type: 'success' | 'error' | 'info', message: string) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "startTimer", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const startTimer = useCallback(() => {$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "submit", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const submit = useCallback(async (v: RatingValue) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "submit", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  submit: (v: RatingValue) => Promise<void>;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}, {"_type": "tag", "name": "timerInterval", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const timerInterval = useRef<number | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "toast", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const [toast, setToast] = useState<RatingToastState | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "toast", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  toast: RatingToastState | null;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  type: 'success' | 'error' | 'info';$/", "language": "TypeScript", "kind": "property", "scope": "RatingToastState", "scopeKind": "interface"}, {"_type": "tag", "name": "useRatingPanel", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^export function useRatingPanel({$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const [value, setValue] = useState<RatingValue | null>(null);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  value: RatingValue | null;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}, {"_type": "tag", "name": "visible", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  const [visible, setVisible] = useState(initialVisible);$/", "language": "TypeScript", "kind": "constant", "scope": "useRatingPanel", "scopeKind": "function"}, {"_type": "tag", "name": "visible", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/hooks/useRatingPanel.ts", "pattern": "/^  visible: boolean;$/", "language": "TypeScript", "kind": "property", "scope": "UseRatingPanel", "scopeKind": "interface"}], "hash": "35295fb848a85bf2d587f7296dbe8084", "format-version": 4, "code-base-name": "content_rating_panel_ui", "filename": "content_rating_panel_ui/src/hooks/useRatingPanel.ts", "fields": [{"name": "export interface RatingToastState {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface UseRatingPanel {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "interface UseRatingPanelArgs {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "autoDismissSeconds?: number;", "scope": "UseRatingPanelArgs", "scopeKind": "interface", "description": "unavailable"}, {"name": "canAutoDismiss: boolean;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}, {"name": "clearToast: () => void;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}, {"name": "contentId: string;", "scope": "UseRatingPanelArgs", "scopeKind": "interface", "description": "unavailable"}, {"name": "error: string | null;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}, {"name": "initialVisible?: boolean;", "scope": "UseRatingPanelArgs", "scopeKind": "interface", "description": "unavailable"}, {"name": "key: number;", "scope": "RatingToastState", "scopeKind": "interface", "description": "unavailable"}, {"name": "loading: boolean;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}, {"name": "message: string;", "scope": "RatingToastState", "scopeKind": "interface", "description": "unavailable"}, {"name": "let mounted = true;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "onDismiss?: (reason: 'timeout' | 'close' | 'rated') => void;", "scope": "UseRatingPanelArgs", "scopeKind": "interface", "description": "unavailable"}, {"name": "pauseTimer: () => void;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}, {"name": "remainingSeconds: number;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}, {"name": "remove: () => Promise<void>;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}, {"name": "resumeTimer: () => void;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}, {"name": "setVisible: (v: boolean) => void;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}, {"name": "submit: (v: RatingValue) => Promise<void>;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}, {"name": "toast: RatingToastState | null;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}, {"name": "type: 'success' | 'error' | 'info';", "scope": "RatingToastState", "scopeKind": "interface", "description": "unavailable"}, {"name": "value: RatingValue | null;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}, {"name": "visible: boolean;", "scope": "UseRatingPanel", "scopeKind": "interface", "description": "unavailable"}], "revision_history": [{"41": ""}]}