{"is_source_file": true, "format": "TypeScript", "description": "This file defines a rating service for handling content ratings, including types, storage functions, and API-like methods for getting, submitting, and deleting ratings. It uses local storage for persistence and simulates network behavior.", "external_files": [], "external_methods": ["localStorage.getItem", "localStorage.setItem"], "published": ["getRating", "submitRating", "deleteRating", "RatingValue", "RatingRecord"], "classes": [], "methods": [{"name": "async function simulateNetwork<T>(result: T, fail = false, delay = 300): Promise<T> { simulateNetwork", "description": "Simulates asynchronous network operations with optional failure and delay.", "scope": "", "scopeKind": ""}, {"name": "function readAll(): Record<string, RatingRecord> { readAll", "description": "Reads all ratings from local storage.", "scope": "", "scopeKind": ""}, {"name": "function writeAll(data: Record<string, RatingRecord>) { writeAll", "description": "Writes all ratings to local storage.", "scope": "", "scopeKind": ""}, {"name": "export async function getRating(contentId: string): Promise<RatingRecord | null> { getRating", "description": "Retrieves the rating record for a specific content ID, simulating an API GET.", "scope": "", "scopeKind": ""}, {"name": "export async function submitRating(contentId: string, rating: RatingValue): Promise<RatingRecord/ submitRating", "description": "Saves or updates a rating for a content ID, simulating an API POST/PUT.", "scope": "", "scopeKind": ""}, {"name": "export async function deleteRating(contentId: string): Promise<void> { deleteRating", "description": "Deletes a rating for a content ID, simulating an API DELETE.", "scope": "", "scopeKind": ""}], "calls": ["localStorage.getItem", "localStorage.setItem", "simulateNetwork"], "search-terms": ["ratingService", "RatingRecord", "submitRating", "deleteRating", "simulateNetwork", "localStorage", "RatingValue"], "state": 2, "file_id": 16, "knowledge_revision": 33, "git_revision": "", "ctags": [{"_type": "tag", "name": "RatingRecord", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^export interface RatingRecord {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "RatingValue", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^export type RatingValue = 'like' | 'love' | 'dislike';$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^const STORAGE_KEY = 'crp_ratings';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  const all = readAll();$/", "language": "TypeScript", "kind": "constant", "scope": "deleteRating", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  const all = readAll();$/", "language": "TypeScript", "kind": "constant", "scope": "getRating", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  const all = readAll();$/", "language": "TypeScript", "kind": "constant", "scope": "submitRating", "scopeKind": "function"}, {"_type": "tag", "name": "contentId", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  const rec = all[contentId] || null;$/", "language": "TypeScript", "kind": "constant", "scope": "getRating", "scopeKind": "function"}, {"_type": "tag", "name": "contentId", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  contentId: string;$/", "language": "TypeScript", "kind": "property", "scope": "RatingRecord", "scopeKind": "interface"}, {"_type": "tag", "name": "deleteRating", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^export async function deleteRating(contentId: string): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fail", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  const fail = Math.random() < 0.1;$/", "language": "TypeScript", "kind": "constant", "scope": "deleteRating", "scopeKind": "function"}, {"_type": "tag", "name": "fail", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  const fail = Math.random() < 0.1;$/", "language": "TypeScript", "kind": "constant", "scope": "submitRating", "scopeKind": "function"}, {"_type": "tag", "name": "getRating", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^export async function getRating(contentId: string): Promise<RatingRecord | null> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "rating", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  const rec: RatingRecord = { contentId, rating, updatedAt: Date.now() };$/", "language": "TypeScript", "kind": "constant", "scope": "submitRating", "scopeKind": "function"}, {"_type": "tag", "name": "rating", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  rating: RatingValue | null;$/", "language": "TypeScript", "kind": "property", "scope": "RatingRecord", "scopeKind": "interface"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^    const raw = localStorage.getItem(STORAGE_KEY);$/", "language": "TypeScript", "kind": "constant", "scope": "readAll", "scopeKind": "function"}, {"_type": "tag", "name": "readAll", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^function readAll(): Record<string, RatingRecord> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "rec", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  const rec = all[contentId] || null;$/", "language": "TypeScript", "kind": "constant", "scope": "getRating", "scopeKind": "function"}, {"_type": "tag", "name": "rec", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  const rec: RatingRecord = { contentId, rating, updatedAt: Date.now() };$/", "language": "TypeScript", "kind": "constant", "scope": "submitRating", "scopeKind": "function"}, {"_type": "tag", "name": "simulateNetwork", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^async function simulateNetwork<T>(result: T, fail = false, delay = 300): Promise<T> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "submitRating", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^export async function submitRating(contentId: string, rating: RatingValue): Promise<RatingRecord/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  const rec: RatingRecord = { contentId, rating, updatedAt: Date.now() };$/", "language": "TypeScript", "kind": "constant", "scope": "submitRating", "scopeKind": "function"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^  updatedAt: number;$/", "language": "TypeScript", "kind": "property", "scope": "RatingRecord", "scopeKind": "interface"}, {"_type": "tag", "name": "writeAll", "path": "/home/kavia/workspace/code-generation/content-rating-feedback-panel-91857-91866/content_rating_panel_ui/src/services/ratingService.ts", "pattern": "/^function writeAll(data: Record<string, RatingRecord>) {$/", "language": "TypeScript", "kind": "function"}], "hash": "1fbce5768b2570f1f073f32ed31429e2", "format-version": 4, "code-base-name": "content_rating_panel_ui", "filename": "content_rating_panel_ui/src/services/ratingService.ts", "fields": [{"name": "export interface RatingRecord {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "contentId: string;", "scope": "RatingRecord", "scopeKind": "interface", "description": "unavailable"}, {"name": "rating: RatingValue | null;", "scope": "RatingRecord", "scopeKind": "interface", "description": "unavailable"}, {"name": "updatedAt: number;", "scope": "RatingRecord", "scopeKind": "interface", "description": "unavailable"}], "revision_history": [{"33": ""}]}